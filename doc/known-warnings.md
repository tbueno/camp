# Known Warnings

This document describes warnings you may see during `camp env rebuild` that are either expected or not fixable within Camp's configuration.

## HOME Ownership Warning

```
warning: $HOME ('/Users/bueno') is not owned by you, falling back to the one defined in the 'passwd' file ('/var/root')
```

**Status**: Expected on some macOS systems

**Cause**: This is a macOS system-level permission issue where the user account doesn't own their home directory. This can happen in certain macOS configurations or when using specific account types.

**Impact**: Minimal - Nix falls back to the home directory defined in the system's passwd file, which should work correctly.

**Fix**: This is outside Camp's scope. If you want to fix this at the system level:
1. Check home directory ownership: `ls -ld ~`
2. If needed, you can change ownership (requires admin): `sudo chown -R $(whoami) ~`

**Note**: This is typically safe to ignore unless you're experiencing actual issues with file permissions.

---

## builtins.toFile Store Path Warning

```
warning: Using 'builtins.toFile' to create a file named 'options.json' that references the store path '/nix/store/...' without a proper context. The resulting file will not have a correct store reference, so this is unreliable and may stop working in the future.
```

**Status**: Expected - Generated by nix-darwin or home-manager internals

**Cause**: This warning comes from nix-darwin's or home-manager's internal code generation, not from Camp's configuration templates. The tools use `builtins.toFile` to generate documentation and metadata files.

**Impact**: None currently - This is a warning about potential future compatibility issues in Nix itself.

**Fix**: Not fixable in Camp's configuration. This would need to be addressed in nix-darwin or home-manager upstream.

**Note**: Safe to ignore - the functionality works correctly despite the warning.

---

## Fixed Warnings

The following warnings have been fixed in Camp's templates:

### ✅ Relative Path in zsh.dotDir
- **Fixed**: Changed from relative path `.camp` to absolute path `${config.home.homeDirectory}/.camp`
- **File**: `templates/files/modules/common.nix`

### ✅ Deprecated initExtra Option
- **Fixed**: Replaced deprecated `programs.zsh.initExtra` with `programs.zsh.initContent`
- **File**: `templates/files/modules/common.nix`

### ✅ Nix Search Path Warning
- **Fixed**: Added `nix.nixPath = [];` to explicitly disable channel lookups (flakes don't need channels)
- **File**: `templates/files/mac.nix`
